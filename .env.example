# 사용 방법
# 1. 이 파일을 .env로 복사
# 2. 모든 플레이스홀더를 실제 값으로 변경
# 3. .env 파일이 버전 관리 시스템에 커밋되지 않도록 확인

# ========== 이미지 버전 ==========
# WeKnora 이미지 버전 태그, 선택값: latest(안정판), main(최신 개발판)
# WEKNORA_VERSION=latest

# gin mod
# 선택값: debug(개발 모드, 상세 로그), release(운영 모드, Swagger 문서 비활성화)
GIN_MODE=release

# 로그 레벨, 선택값: debug, info, warn, error, fatal, 기본값은 debug
# LOG_LEVEL=debug

# 신규 사용자 가입 금지(운영 환경에서는 true 권장)
DISABLE_REGISTRATION=false

# Ollama 서비스의 기준 URL, 로컬/원격 서버에서 실행 중인 Ollama 서비스 연결용
OLLAMA_BASE_URL=http://host.docker.internal:11434

# 저장소 설정
# 주 데이터베이스 타입(postgres/mysql)
DB_DRIVER=postgres

# 벡터 저장소 타입(postgres/elasticsearch_v7/elasticsearch_v8/qdrant)
RETRIEVE_DRIVER=postgres

# 파일 저장소 타입(local/minio/cos)
STORAGE_TYPE=local

# 스트림 처리 백엔드(memory/redis)
STREAM_MANAGER_TYPE=redis

# 애플리케이션 서비스 호스트명, 기본값은 app(Docker 내부 서비스명)
# 원격 백엔드로 프록시가 필요하면 remote-app.example.com 같은 원격 주소 사용
APP_HOST=app

# 애플리케이션 서비스 호스트 매핑 포트, 기본값 8080(호스트 접근에만 영향, 컨테이너 간 통신에는 영향 없음)
APP_PORT=8080

# NGINX가 백엔드로 프록시할 대상 포트, 기본값 8080(App 컨테이너 내부 리슨 포트)
# 로컬 배포: 기본값 유지, APP_PORT 변경과 무관
# 원격 배포: 원격 App 서비스의 실제 포트로 설정
# APP_BACKEND_PORT=8080

# NGINX가 백엔드로 프록시할 프로토콜, 기본값 http
# 원격 배포에서 백엔드가 HTTPS면 https로 설정
# APP_SCHEME=http

# 프런트엔드 서비스 포트, 기본값 80
FRONTEND_PORT=80

# 문서 파싱 모듈 포트, 기본값 50051
DOCREADER_PORT=50051

# 데이터베이스 사용자명
DB_USER=postgres

# 데이터베이스 비밀번호
DB_PASSWORD=postgres123!@#

# 데이터베이스 이름
DB_NAME=WeKnora

# 스트림 처리 백엔드로 redis를 사용하는 경우 아래 파라미터 설정 필요
# Redis 사용자명, Redis 6.0+ ACL 기능 지원(선택)
# REDIS_USERNAME=

# Redis 비밀번호, 비밀번호가 없으면 비워둘 수 있음
REDIS_PASSWORD=redis123!@#

# Redis 데이터베이스 인덱스, 기본값 0
REDIS_DB=0

# Redis key 접두사(네임스페이스 분리용)
REDIS_PREFIX=stream:

# 로컬 저장소 사용 시 파일 저장 기본 디렉터리 경로
LOCAL_STORAGE_BASE_DIR=/data/files

# 손상 데이터 자동 복구 여부
AUTO_RECOVER_DIRTY=true

TENANT_AES_KEY=weknorarag-api-key-secret-secret

# 지식 그래프 구축/검색 기능 활성화 여부(구축 단계에서 대형 모델 호출 필요, 시간이 오래 걸릴 수 있음)
ENABLE_GRAPH_RAG=false


# 프런트엔드 로그인 토큰 갱신용 JWT_SECRET 설정
JWT_SECRET=weknora-jwt-secret

# MinIO 포트
# MINIO_PORT=9000

# MinIO 콘솔 포트
# MINIO_CONSOLE_PORT=9001

# Embedding 동시성 수, 429 오류 발생 시 값을 줄여 조정
CONCURRENCY_POOL_SIZE=5

# Docreader 동시 작업 수(이미지 OCR/Caption 등 비동기 작업), 기본값 1
# 기본 OCR 엔진인 paddleocr는 고동시성 환경에서 예외가 발생할 수 있으므로 신중히 설정
# IMAGE_MAX_CONCURRENT=1

# Docreader OCR 백엔드(no_ocr, paddle, nanonets)
# OCR_BACKEND=paddle

# ElasticSearch를 벡터 저장소로 사용하는 경우 아래 파라미터 설정 필요
# ElasticSearch 주소, 예: http://localhost:9200
# ELASTICSEARCH_ADDR=your_elasticsearch_addr

# ElasticSearch 사용자명(인증 필요 시)
# ELASTICSEARCH_USERNAME=your_elasticsearch_username

# ElasticSearch 비밀번호(인증 필요 시)
# ELASTICSEARCH_PASSWORD=your_elasticsearch_password

# ElasticSearch 인덱스명(벡터 데이터 저장용)
# ELASTICSEARCH_INDEX=WeKnora

# Qdrant를 벡터 저장소로 사용하는 경우 아래 파라미터 설정 필요
# Qdrant 서비스 호스트 주소
# QDRANT_HOST=localhost

# Qdrant 서비스 포트
# QDRANT_PORT=6334

# Qdrant 컬렉션 이름(벡터 데이터 저장용)
# QDRANT_COLLECTION=weknora_embeddings

# Qdrant API 키(인증 필요 시, 선택)
# QDRANT_API_KEY=your_qdrant_api_key

# TLS 암호화 연결 활성화 여부(선택, 기본값 false)
# QDRANT_USE_TLS=false

# MinIO를 파일 저장소로 사용하는 경우 아래 파라미터 설정 필요
# MinIO 액세스 키
# MINIO_ACCESS_KEY_ID=your_minio_access_key

# MinIO 시크릿 키
# MINIO_SECRET_ACCESS_KEY=your_minio_secret_key

# MinIO 버킷 이름(파일 저장용)
# MINIO_BUCKET_NAME=your_minio_bucket_name

# Tencent Cloud COS를 파일 저장소로 사용하는 경우 아래 파라미터 설정 필요
# Tencent Cloud COS 액세스 키 ID
# COS_SECRET_ID=your_cos_secret_id

# Tencent Cloud COS 시크릿 키
# COS_SECRET_KEY=your_cos_secret_key

# Tencent Cloud COS 리전, 예: ap-guangzhou
# COS_REGION=your_cos_region

# Tencent Cloud COS 버킷 이름
# COS_BUCKET_NAME=your_cos_bucket_name

# Tencent Cloud COS 앱 ID
# COS_APP_ID=your_cos_app_id

# Tencent Cloud COS 경로 접두사(파일 저장용)
# COS_PATH_PREFIX=your_cos_path_prefix

# COS_ENABLE_OLD_DOMAIN=true 는 기존 도메인 형식 사용을 의미, 기본값 true
COS_ENABLE_OLD_DOMAIN=true

# 네트워크 연결 파싱에 Web 프록시를 사용하는 경우 아래 파라미터 설정 필요
# WEB_PROXY=your_web_proxy

# Neo4j 사용 스위치
# NEO4J_ENABLE=false

# Neo4j 접속 주소
# NEO4J_URI=neo4j://neo4j:7687

# Neo4j 사용자명과 비밀번호
# NEO4J_USERNAME=neo4j

# Neo4j 비밀번호
# NEO4J_PASSWORD=password

# ========== 파일 업로드 크기 제한 ==========
# 통합 파일 크기 제한(MB), 기본값 50MB
# 영향 범위: 단일 파일 업로드, gRPC 메시지 크기, Nginx 요청 본문 크기
# MAX_FILE_SIZE_MB=50

# ========== Agent Skills Sandbox 설정 ==========
# Sandbox 모드: docker(기본값), local, disabled
WEKNORA_SANDBOX_MODE=docker

# 스크립트 실행 제한 시간(초), 기본값 60
WEKNORA_SANDBOX_TIMEOUT=60

# 사용자 정의 Sandbox Docker 이미지
WEKNORA_SANDBOX_DOCKER_IMAGE=wechatopenai/weknora-sandbox:latest

# APK 미러 소스 설정(선택)
APK_MIRROR_ARG=mirrors.tencent.com
